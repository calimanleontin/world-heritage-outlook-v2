node.revision_edit:
  path: '/node/{node}/revisions/{node_revision}/edit'
  defaults:
    _entity_form: node.edit
    _title: 'Edit revision'
  requirements:
    access: 'update'
    node: \d+
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentEditAccess'
  options:
    _node_operation_route: TRUE

iucn_assessment.node.state_change:
  path: '/node/{node}/state_change'
  defaults:
    _title: 'State change'
    _controller: '\Drupal\iucn_assessment\Controller\IucnNodeController::stateChangeForm'
  requirements:
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentStateChangeAccess'
  options:
    _node_operation_route: TRUE
    _admin_route: TRUE
    parameters:
      node:
        type: entity:node

iucn_assessment.node_revision.state_change:
  path: '/node/{node}/revisions/{node_revision}/state_change'
  defaults:
    _title: 'State change'
    _controller: '\Drupal\iucn_assessment\Controller\IucnNodeController::stateChangeForm'
  requirements:
    node_revision: \d+
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentStateChangeAccess'
  options:
    _node_operation_route: TRUE
    _admin_route: TRUE
    parameters:
      node:
        type: entity:node

iucn_assessment.node.assign_users:
  path: '/node/{node}/assign_users'
  defaults:
    _entity_form: node.assign_users
    _title: 'Assign users'
  requirements:
    _custom_access: '\Drupal\iucn_assessment\Form\NodeSiteAssessmentAssignUsersForm::access'
  options:
    form_display: assign_users
    _admin_route: TRUE
    parameters:
      node:
        type: entity:node

iucn_assessment.user_assign:
  path: '/user/{user}/assign'
  defaults:
    _form: '\Drupal\iucn_assessment\Form\UserAssignForm'
  requirements:
    _permission: 'bulk assign users to assessments'
  options:
    _admin_route: TRUE
    parameters:
      user:
        type: entity:user


iucn_assessment.revert_paragraph:
  path: 'revert_paragraph/{node}/{field}/{field_wrapper_id}/{paragraph}'
  defaults:
    _title: 'Revert paragraph'
    _controller: '\Drupal\iucn_assessment\Controller\IucnNodeController::revertParagraph'
  requirements:
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentEditAccess'
  options:
    _admin_route: TRUE
    parameters:
      paragraph:
        type: 'entity:paragraph'

iucn_assessment.paragraph_diff_form:
  path: 'assessment/diff/{parent_entity_type}/{parent_entity_bundle}/{parent_entity_revision}/{field}/{field_wrapper_id}/{delta}/{paragraph}/{paragraph_revision}/{js}'
  defaults:
    _title: 'See differences'
    _controller: '\Drupal\iucn_assessment\Controller\ModalDiffController::diffForm'
  requirements:
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentParagraphEditAccess'
    js: 'nojs|ajax'
  options:
    _admin_route: TRUE
    parameters:
      paragraph:
        type: 'entity:paragraph'
      paragraph_revision:
        type: 'entity_revision:paragraph'

iucn_assessment.field_diff_form:
  path: 'node/diff/{node}/{field}/{field_wrapper_id}'
  defaults:
    _title: 'See differences'
    _controller: '\Drupal\iucn_assessment\Controller\ModalDiffController::fieldDiffForm'
  requirements:
      access: 'update'
      node: \d+
      _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentEditAccess'
  options:
    _admin_route: TRUE
    parameters:
      node:
        type: entity:node

iucn_assessment.modal_paragraph_add:
  path: 'assessment/add/{node}/{node_revision}/{field}/{field_wrapper_id}/{bundle}'
  defaults:
    _title: 'Add paragraph'
    _controller: '\Drupal\iucn_assessment\Controller\IucnModalController::addFirst'
  requirements:
    access: 'update'
    node: \d+
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentEditAccess'
  options:
    _node_operation_route: TRUE
    _admin_route: TRUE
    parameters:
      node:
        type: entity:node
