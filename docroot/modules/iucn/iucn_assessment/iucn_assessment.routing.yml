node.revision_edit:
  path: '/node/{node}/revisions/{node_revision}/edit'
  defaults:
    _entity_form: node.edit
    _title: 'Edit revision'
  requirements:
    access: 'update'
    node: \d+
    _custom_access: '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentEdit'
  options:
    _node_operation_route: TRUE

iucn_assessment.node.state_change:
  path: '/node/{node}/state_change'
  defaults:
    _title: 'State change'
    _controller: '\Drupal\iucn_assessment\Controller\IucnNodeController::stateChangeForm'
  requirements:
    node: \d+
    _custom_access:  '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentStateEdit'
  options:
    _node_operation_route: TRUE
    _admin_route: TRUE

iucn_assessment.node_revision.state_change:
  path: '/node/{node}/revisions/{node_revision}/state_change'
  defaults:
    _title: 'State change'
    _controller: '\Drupal\iucn_assessment\Controller\IucnNodeController::stateChangeForm'
  requirements:
    node: \d+
    _custom_access:  '\Drupal\iucn_assessment\Plugin\Access\AssessmentAccess::assessmentStateEdit'
  options:
    _node_operation_route: TRUE
    _admin_route: TRUE

iucn_assessment.node.assign_users:
  path: '/node/{node}/assign_users'
  defaults:
    _entity_form: node.assign_users
    _title: 'Assign users'
  requirements:
    _permission: 'assign users to assessments'
    _custom_access: '\Drupal\iucn_assessment\Form\NodeSiteAssessmentAssignUsersForm::access'
  options:
    form_display: assign_users
    _admin_route: TRUE
    parameters:
      user:
        type: entity:user

iucn_assessment.user_assign:
  path: '/user/{user}/assign'
  defaults:
    _form: '\Drupal\iucn_assessment\Form\UserAssignForm'
  requirements:
    _permission: 'assign users to assessments, administer users'
    _custom_access: '\Drupal\iucn_assessment\Form\UserAssignForm::access'
  options:
    _admin_route: TRUE
    parameters:
      user:
        type: entity:user
