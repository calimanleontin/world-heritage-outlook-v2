langcode: en
status: true
id: iucn_migrate_sites
migration_group: iucn migrations
label: Sites
source:
  plugin: iucn_assessments
  path_setting: sites_path
  ids:
     siteId:
      type: integer
  fields:
    -
      name: siteId
      selector: siteId
    -
      name: nameEn
      selector: nameEn
    -
      name: wdpaId
      selector: wdpaId
    -
      name: unescoId
      selector: unescoId
    -
      name: nameFr
      selector: nameFr
    -
      name: description
      selector: description
    -
      name: inscriptionYear
      selector: inscriptionYear
    -
      name: active
      selector: active
    -
      name: transboundary
      selector: transboundary
    -
      name: mixedSite
      selector: mixedSite
    -
      name: culturalLandscape
      selector: culturalLandscape
    -
      name: area
      selector: area
    -
      name: bufferZone
      selector: bufferZone
    -
      name: bufferZoneArea
      selector: bufferZoneArea
    -
      name: serial
      selector: serial
    -
      name: iucnPaCategories
      selector: iucnPaCategories
    -
      name: inscriptionCriteria
      selector: inscriptionCriteria
    -
      name: countries
      selector: countries
    -
      name: otherDesignations
      selector: otherDesignations
    -
      name: thematics
      selector: thematics
process:
  type:
    plugin: default_value
    default_value: site
  field_site_id: siteId
  title: nameEn
  field_wdpa_id: wdpaId
  field_unesco_id: unescoId
  body/value: description
  field_inscription_year:
    plugin: iucn_inscription_year
    source: inscriptionYear
  status: active
  field_transboundary: transboundary
  field_mixed_site: mixedSite
  field_cultural_landscape: culturalLandscape
  field_area: area
  field_buffer_zone: bufferZone
  field_buffer_zone_area: bufferZoneArea
  field_serial: serial
  field_category:
     plugin: entity_generate
     source: iucnPaCategories
     entity_type: taxonomy_term
     bundle_key: vid
     bundle: category
     value_key: name
  field_inscription_criteria:
     plugin: entity_generate
     source: inscriptionCriteria
     entity_type: taxonomy_term
     bundle_key: vid
     bundle: inscription_criteria
     value_key: name
  field_country:
    plugin: entity_generate
    source: countries
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: country
    value_key: name
  field_designation:
    plugin: entity_generate
    source: otherDesignations
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: designation
    value_key: name
  field_theme:
    plugin: entity_generate
    source: thematics
    entity_type: taxonomy_term
    bundle_key: vid
    bundle: theme
    value_key: name
  field_geolocation:
    plugin: iucn_coordinate
    source: wdpaId
  uid:
    plugin: default_value
    default_value: 1
destination:
  plugin: 'entity:node'
